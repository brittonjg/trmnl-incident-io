{% comment %}
  Incident.io Active Incidents - Half Horizontal Layout
  Compact two-column view showing active and closed incidents
{% endcomment %}

<div class="layout layout--col gap--space-between">

  <!-- Metrics -->
  {% render "metrics_header", active: active_count, critical: critical_count, resolved: closed_count %}

  <!-- Two Column Layout: Active Left, Closed Right -->
  <div class="grid grid--cols-2 gap--medium mt--2.5">

    <!-- Left Column: Active Incidents -->
    <div class="grid grid--cols-1 gap--small">
      {% assign active_shown = 0 %}
      {% for incident in all_incidents %}
        {% if incident.incident_status.category != "closed" and active_shown < 2 %}
          {% assign active_shown = active_shown | plus: 1 %}
          {% render "incident_card", incident: incident, truncate_length: 35 %}
        {% endif %}
      {% endfor %}
      {% if active_count == 0 %}
        {% render "empty_state", size: 'small' %}
      {% endif %}
    </div>

    <!-- Right Column: Closed Incidents -->
    <div class="grid grid--cols-1 gap--small">
      {% assign closed_shown = 0 %}
      {% for incident in all_incidents %}
        {% if incident.incident_status.category == "closed" and closed_shown < 2 %}
          {% assign closed_shown = closed_shown | plus: 1 %}
          {% render "incident_card", incident: incident, truncate_length: 35 %}
        {% endif %}
      {% endfor %}
      {% if closed_count == 0 %}
        <div class="item">
          <div class="content text--center p--2.5">
            <div class="label--small text--black">No closed incidents</div>
          </div>
        </div>
      {% endif %}
    </div>

  </div>

</div>

<!-- Title Bar -->
{% render "title_bar" %}
